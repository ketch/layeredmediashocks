<!-- **** DO NOT EDIT THIS FILE *** 
         This file was generated automatically from file
              setrun.py
         using $CLAW/doc/clawcode2html.py         -->

<html>
<title> setrun.py.html </title>


           <BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000FF" 
                 VLINK="#5500DD" ALINK="#FF0000">
           <font FACE="HELVETICA,ARIAL">
           
<!-- Created from the file /Users/ketch/Research/Projects/stegoton/code/clawpack/setrun.py -->
<!-- Date: Wed Dec  1 2010 at 10:08:31 -->

<table bgcolor="#FFEE99"> <tr> <td>
<tr> <td><a href="http://www.clawpack.org"><img
            src="http://localhost:50005/doc/images/clawlogo.jpg"
            width=100 alt="CLAWPACK"></a>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font size=6> setrun.py.html </font>
            </td><td>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; </td> </tr> <tr> <td>
&nbsp;Source file: &nbsp;&nbsp;<a href="setrun.py">setrun.py </a>
</td></tr><tr><td>
&nbsp;Directory:  &nbsp; /Users/ketch/Research/Projects/stegoton/code/clawpack 
</td></tr><tr><td>
&nbsp;Converted:  &nbsp; Wed Dec  1 2010 at 10:08:31 
&nbsp; using <a href="http://localhost:50005/doc/clawcode2html.html">clawcode2html</a>
</td></tr><tr><td>
<font color="#BB3300"> &nbsp;This documentation file will 
not reflect any later changes in the source file. </font>
</td></tr></table></font>
<p>
<pre> 
""" 
Module to set up run time parameters for Clawpack.

The values set in the function setrun are then written out to data files
that will be read in by the Fortran code.
    
""" 

import os
from pyclaw import data 


<font color="blue">#------------------------------</font>
def setrun(claw_pkg='classic'):
<font color="blue">#------------------------------</font>
    
    """ 
    Define the parameters used for running Clawpack.

    OUTPUT:
        rundata - object of class ClawRunData 
    
    """ 
    
    rundata = data.ClawRunData(pkg=claw_pkg, ndim=1)

    <font color="blue">#------------------------------------------------------------------</font>
    <font color="blue"># Problem-specific parameters to be written to setprob.data:</font>
    <font color="blue">#------------------------------------------------------------------</font>

    probdata = rundata.new_UserData(name='probdata',fname='setprob.data')

    probdata.add_param('t1',   10.,  'BC timescale') <font color="blue">#=10 for entropy tests</font>
    probdata.add_param('a1',   0.1, 'BC amplitude') <font color="blue"># a1=0.2 for entropy tests</font>
    probdata.add_param('tw1',   10.,  'BC timescale') <font color="blue">#=10 for entropy tests</font>
    probdata.add_param('K_A',    1.0,   'bulk modulus in A-layers')
    probdata.add_param('K_B',    4.0,   'bulk modulus in B-layers')
    probdata.add_param('rho_A',    1.0,   'density in A-layers')
    probdata.add_param('rho_B',    4.0,   'density in B-layers')
    probdata.add_param('trtime',    5000,   'time-reversal time')
    probdata.add_param('ic',   2, 'IC type') 
    probdata.add_param('a2',   1.5, 'IC amplitude') 

    
    <font color="blue">#------------------------------------------------------------------</font>
    <font color="blue"># Standard Clawpack parameters to be written to claw.data:</font>
    <font color="blue">#------------------------------------------------------------------</font>

    clawdata = rundata.clawdata  <font color="blue"># initialized when rundata instantiated</font>

    <font color="blue"># ---------------</font>
    <font color="blue"># Spatial domain:</font>
    <font color="blue"># ---------------</font>

    <font color="blue"># Number of space dimensions:</font>
    clawdata.ndim = 1
    
    <font color="blue"># Lower and upper edge of computational domain:</font>
    clawdata.xlower = 0.0
    clawdata.xupper = 600.0

    <font color="blue"># Number of grid cells:</font>
    clawdata.mx = 12288*600

    <font color="blue"># ---------------</font>
    <font color="blue"># Size of system:</font>
    <font color="blue"># ---------------</font>

    <font color="blue"># Number of equations in the system:</font>
    clawdata.meqn = 2

    <font color="blue"># Number of auxiliary variables in the aux array (initialized in setaux)</font>
    clawdata.maux = 3
    
    <font color="blue"># Index of aux array corresponding to capacity function, if there is one:</font>
    clawdata.mcapa = 0
    
    
    
    <font color="blue"># -------------</font>
    <font color="blue"># Initial time:</font>
    <font color="blue"># -------------</font>

    clawdata.t0 = 0.0
    
    
    <font color="blue"># -------------</font>
    <font color="blue"># Output times:</font>
    <font color="blue">#--------------</font>

    <font color="blue"># Specify at what times the results should be written to fort.q files.</font>
    <font color="blue"># Note that the time integration stops after the final output time.</font>
    <font color="blue"># The solution at initial time t0 is always written in addition.</font>

    clawdata.outstyle = 3

    if clawdata.outstyle==1:
        <font color="blue"># Output nout frames at equally spaced times up to tfinal:</font>
        clawdata.nout = 10
        clawdata.tfinal = 500.

    elif clawdata.outstyle == 2:
        <font color="blue"># Specify a list of output times.  </font>
        clawdata.tout =  [0.5, 1.0]   <font color="blue"># used if outstyle == 2</font>
        clawdata.nout = len(clawdata.tout)

    elif clawdata.outstyle == 3:
        <font color="blue"># Output every iout timesteps with a total of ntot time steps:</font>
        iout = 40
        ntot = 40
        clawdata.iout = [iout, ntot]
    


    <font color="blue"># ---------------------------------------------------</font>
    <font color="blue"># Verbosity of messages to screen during integration:  </font>
    <font color="blue"># ---------------------------------------------------</font>

    <font color="blue"># The current t, dt, and cfl will be printed every time step</font>
    <font color="blue"># at AMR levels <= verbosity.  Set verbosity = 0 for no printing.</font>
    <font color="blue">#   (E.g. verbosity == 2 means print only on levels 1 and 2.)</font>
    clawdata.verbosity = 0
    
    

    <font color="blue"># --------------</font>
    <font color="blue"># Time stepping:</font>
    <font color="blue"># --------------</font>

    <font color="blue"># if dt_variable==1: variable time steps used based on cfl_desired,</font>
    <font color="blue"># if dt_variable==0: fixed time steps dt = dt_initial will always be used.</font>
    clawdata.dt_variable = 1
    
    <font color="blue"># Initial time step for variable dt.  </font>
    <font color="blue"># If dt_variable==0 then dt=dt_initial for all steps:</font>
    clawdata.dt_initial = 0.025
    
    <font color="blue"># Max time step to be allowed if variable dt used:</font>
    clawdata.dt_max = 1e+99
    
    if claw_pkg.lower()=='classic':
        <font color="blue"># Desired Courant number if variable dt used, and max to allow without </font>
        <font color="blue"># retaking step with a smaller dt:</font>
        clawdata.cfl_desired = 0.8
        clawdata.cfl_max = 0.9

        <font color="blue"># Order of accuracy:  1 => Godunov,  2 => Lax-Wendroff plus limiters</font>
        clawdata.order = 2

        <font color="blue"># Transverse order for 2d or 3d (not used in 1d):</font>
        clawdata.order_trans = 0
    
        <font color="blue"># List of limiters to use for each wave family:  </font>
        <font color="blue"># Required:  len(mthlim) == mwaves</font>
        clawdata.mthlim = [3, 3]

        <font color="blue"># Source terms splitting:</font>
        <font color="blue">#   src_split == 0  => no source term (src routine never called)</font>
        <font color="blue">#   src_split == 1  => Godunov (1st order) splitting used, </font>
        <font color="blue">#   src_split == 2  => Strang (2nd order) splitting used,  not recommended.</font>
        clawdata.src_split = 0
    
        <font color="blue"># Number of ghost cells (usually 2)</font>
        clawdata.mbc = 2
    
    
    elif claw_pkg.lower()=='sharpclaw':
        clawdata.cfl_desired = 2.45
        clawdata.cfl_max = 2.5
    
        <font color="blue"># Time integrator</font>
        clawdata.time_integrator = 4
    
        <font color="blue"># List of limiters to use for each wave family:  </font>
        <font color="blue"># Required:  len(mthlim) == mwaves</font>
        clawdata.mthlim = [5,5]
    
        <font color="blue">#User-supplied total fluctuation solver?</font>
        clawdata.tfluct_solver = 1

        <font color="blue">#Use characteristic decomposition in reconstruction step?</font>
        clawdata.char_decomp = 0

        <font color="blue"># Source terms?</font>
        clawdata.src_term = 0
    
        <font color="blue"># Limiter type: 0=None, 1=TVD, 2=WENO</font>
        clawdata.lim_type = 2

        <font color="blue"># Number of ghost cells (usually 3)</font>
        clawdata.mbc = 3
    


    <font color="blue"># Maximum number of time steps to allow between output times:</font>
    clawdata.max_steps = 50000

    
    

    <font color="blue"># Number of waves in the Riemann solution:</font>
    clawdata.mwaves = 2
    
   
    <font color="blue"># --------------------</font>
    <font color="blue"># Boundary conditions:</font>
    <font color="blue"># --------------------</font>

    <font color="blue"># Choice of BCs at xlower and xupper:</font>
    <font color="blue">#   0 => user specified (must modify bcN.f to use this option)</font>
    <font color="blue">#   1 => extrapolation (non-reflecting outflow)</font>
    <font color="blue">#   2 => periodic (must specify this at both boundaries)</font>
    <font color="blue">#   3 => solid wall for systems where q(2) is normal velocity</font>
    
    clawdata.mthbc_xlower = 0
    clawdata.mthbc_xupper = 1
    
    return rundata
    <font color="blue"># end of function setrun</font>
    <font color="blue"># ----------------------</font>


if __name__ == '__main__':
    <font color="blue"># Set up run-time parameters and write all data files.</font>
    import sys
    if len(sys.argv) == 2:
	rundata = setrun(sys.argv[1])
    else:
	rundata = setrun()

    rundata.write()
    
</pre></html>
