<!-- **** DO NOT EDIT THIS FILE *** 
         This file was generated automatically from file
              opendatafile.f
         using $CLAW/doc/clawcode2html.py         -->

<html>
<title> opendatafile.f.html </title>


           <BODY TEXT="#000000" BGCOLOR="#FFFFFF" LINK="#0000FF" 
                 VLINK="#5500DD" ALINK="#FF0000">
           <font FACE="HELVETICA,ARIAL">
           
<!-- Created from the file /Users/ketch/Research/Projects/periodicshock/shockdata/opendatafile.f -->
<!-- Date: Tue Feb 15 2011 at 10:15:26 -->

<table bgcolor="#FFEE99"> <tr> <td>
<tr> <td><a href="http://www.clawpack.org"><img
            src="http://localhost:50005/doc/images/clawlogo.jpg"
            width=100 alt="CLAWPACK"></a>
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;
            &nbsp;&nbsp;&nbsp;&nbsp;&nbsp;&nbsp;<font size=6> opendatafile.f.html </font>
            </td><td>&nbsp;&nbsp;&nbsp;&nbsp; &nbsp;&nbsp; </td> </tr> <tr> <td>
&nbsp;Source file: &nbsp;&nbsp;<a href="opendatafile.f">opendatafile.f </a>
</td></tr><tr><td>
&nbsp;Directory:  &nbsp; /Users/ketch/Research/Projects/periodicshock/shockdata 
</td></tr><tr><td>
&nbsp;Converted:  &nbsp; Tue Feb 15 2011 at 10:15:26 
&nbsp; using <a href="http://localhost:50005/doc/clawcode2html.html">clawcode2html</a>
</td></tr><tr><td>
<font color="#BB3300"> &nbsp;This documentation file will 
not reflect any later changes in the source file. </font>
</td></tr></table></font>
<p>
<pre> 

      subroutine opendatafile(iunit, fname)
<font color="blue">c     #</font>
<font color="blue">c     # Open the file fname and determine how many leading lines are</font>
<font color="blue">c     # comments.  Then rewind and skip over the comment lines so that the</font>
<font color="blue">c     # file is ready for reading data from.</font>
<font color="blue">c     #</font>
<font color="blue">c     # All comment lines must start with # in the first column.</font>

      integer iunit, line, commentlines
      character*25 fname
      character*12 fname12
      character*1 firstchar
      logical foundFile
      
<font color="blue">c     # Debug statement to test fname:</font>
<font color="blue">c     write(6,*) '+++ fname = XXX',fname,'XXX'</font>

      inquire(file=fname,exist=foundFile)
      if (.not. foundFile) then
<font color="blue">c         # for backward compatability: maybe fname is declared character*12</font>
<font color="blue">c         # in calling routine...</font>
          fname12 = fname(1:12)
<font color="blue">c         #write(6,*) 'truncated fname12 = XXX',fname12,'XXX'</font>
          inquire(file=fname12,exist=foundFile)
          if (.not. foundFile) then
            write(*,*) '*** in opendatafile, file not found:', fname 
            stop
          endif
          open(unit=iunit,file=fname12,status='old',form='formatted')
          write(6,*) 'Reading data file: ', fname12
      else
          open(unit=iunit,file=fname,status='old',form='formatted')
          write(6,*) 'Reading data file: ', fname
      endif

<font color="blue">c     # this version may not work in f77</font>
<font color="blue">c     firstchar = '#'</font>
<font color="blue">c     commentlines = -1</font>
<font color="blue">c     do while (firstchar == '#')</font>
<font color="blue">c        read(iunit,*) firstchar</font>
<font color="blue">c        commentlines = commentlines + 1</font>
<font color="blue">c        enddo</font>

      firstchar = '<font color="blue">#'</font>
      commentlines = -1
      do commentlines=-1,1000
          if (firstchar .eq. '<font color="blue">#') then</font>
              read(iunit,"(a1)") firstchar
          else
              exit
          endif
      enddo
      
      write(6,602) commentlines
  602 format('         first',i2,
     &       ' lines are comments and will be skipped')
     
<font color="blue">c     Rewind file and go back to data line</font>
<font color="blue">C       print *,firstchar</font>
<font color="blue">C       rewind(iunit)</font>
<font color="blue">C       do line=1,commentlines</font>
<font color="blue">C          read(iunit,*) firstchar</font>
<font color="blue">C          print *,firstchar</font>
<font color="blue">C          enddo</font>
<font color="blue">C       </font>
      return
      end
</pre></html>
